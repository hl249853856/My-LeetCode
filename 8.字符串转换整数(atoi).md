```C++
class Solution {
public:
    int myAtoi(string str) {
        if(str.size()==0)
            return 0;
        int i=0;
        int val=0;
        int flag=0;//负数标志
        while(i<str.size()&&str[i]==' ')
            i++;
        if(str[i]=='-')
        {
            flag=1;
            i++;
        }
        else if(str[i]=='+')
            i++;

        while(i<str.size()&&str[i]>='0'&&str[i]<='9')
        {
            int key;
            if(flag==0)
                key=str[i]-'0';
            else
                key='0'-str[i];
            if(val>INT_MAX/10||(val==INT_MAX/10&&key>7))
                return INT_MAX;
            if(val<INT_MIN/10||(val==INT_MIN/10&&key<-8))
                return INT_MIN;
            val=val*10+key;
            i++;
        }
        
        return val;
    }
};
```
